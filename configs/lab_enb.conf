#####################################################################
#                   srsENB configuration file
#                   LAB TEST NETWORK ONLY
#
# WARNING: Only use in RF-shielded environment!
#####################################################################

[enb]
enb_id = 0x19B
mcc = 001  #  Test MCC
mnc = 01   # Test MNC
mme_addr = 127.0.0.1
gtp_bind_addr = 127.0.0.1
s1c_bind_addr = 127.0.0.1
s1c_bind_port = 0
n_prb = 50  # 10 MHz bandwidth (50 PRB)
#tm = 4     # Transmission mode (MIMO)
#nof_ports = 2

#####################################################################
# eNB configuration files
#
# sib_config: SIB1, SIB2 and SIB3 configuration file
# note: When enabled, this file will replace auto-generated SIBs
# rr_config: Radio Resources configuration file
# rb_config: SRB/DRB configuration file
#####################################################################
[enb_files]
sib_config = sib.conf
rr_config  = rr.conf
rb_config  = rb.conf

#####################################################################
# RF configuration
#
# dl_earfcn: Downlink EARFCN code
# tx_gain: Transmit gain (dB) - KEEP LOW for lab use!
# rx_gain: Optional receive gain (dB)
#
# device_name: Device driver family
# device_args: Arguments for the device driver
#####################################################################
[rf]
dl_earfcn = 3350  # Band 7 (NOT Band 2 - to avoid interference with real networks)
tx_gain = 30      # LOW gain for lab only! (normally 70-80)
rx_gain = 40

device_name = UHD
device_args = type=b200,master_clock_rate=23.04e6
#time_adv_nsamples = auto

#####################################################################
# Packet capture configuration
#
# MAC-layer packets are captured to file in compact format which can
# be decoded by Wireshark.
# For more information, see: https://wiki.wireshark.org/MAC-LTE
#
# Please note that this setting will by default only capture MAC
# frames on dedicated channels, and not SIB.  You have to build with
# WRITE_SIB_PCAP enabled in enbmac_lte.cc if you want SIB to be part of
# the MAC pcap file.
#
# S1AP Packets are captured to file in compact format which can
# be decoded by Wireshark.
#
# enable: Enable MAC layer packet captures (true/false)
# filename: File path to use for packet captures
# s1ap_enable:   Enable or disable the PCAP.
# s1ap_filename: File name where to save the PCAP.
#####################################################################
[pcap]
enable = true
filename = /tmp/enb_mac.pcap
s1ap_enable = true
s1ap_filename = /tmp/enb_s1ap.pcap

#####################################################################
# Log configuration
#
# Log levels can be set for individual layers. "all_level" sets log
# level for all layers unless otherwise configured.
# Format: e.g. phy_level = info
#
# In the same way, packet hex dumps can be limited for each level.
# "all_hex_limit" sets the hex limit for all layers unless otherwise
# configured.
# Format: e.g. phy_hex_limit = 32
#
# Logging layers: rf, phy, phy_lib, mac, rlc, pdcp, rrc, nas, gtpu,
# usim, all
# Logging levels: debug, info, warning, error, none
#
# filename: File path to use for log output. Can be set to stdout
#           to print logs to standard output
# file_max_size: Maximum file size (in kilobytes). When passed, multiple files are created.
#                If set to negative, a single log file will be created.
#####################################################################
[log]
all_level = info
all_hex_limit = 32
filename = /tmp/enb.log
file_max_size = -1

[gui]
enable = false

#####################################################################
# Scheduler configuration options
#
# sched_policy:      User MAC scheduling policy (E.g. time_rr, time_pf)
# min_aggr_level:    Min aggregation level index (l=log2(L) can be 0, 1, 2 or 3)
# max_aggr_level:    Max aggregation level index (l=log2(L) can be 0, 1, 2 or 3)
# adaptive_aggr_level: Boolean flag to enable/disable adaptive aggregation level based on target BLER
# pdsch_mcs:         Optional fixed PDSCH MCS (ignores reported CQIs if specified)
# pdsch_max_mcs:     Optional PDSCH MCS limit
# pusch_mcs:         Optional fixed PUSCH MCS (ignores reported CQIs if specified)
# pusch_max_mcs:     Optional PUSCH MCS limit
# nof_ctrl_symbols:  Number of control symbols
#####################################################################
[scheduler]
#policy     = time_pf
#policy_args = 2
#min_aggr_level   = 0
#max_aggr_level   = 3
#adaptive_aggr_level = false
#pdsch_mcs        = -1
#pdsch_max_mcs    = -1
#pusch_mcs        = -1
#pusch_max_mcs    = 16
#nof_ctrl_symbols = 3

#####################################################################
# eMBMS configuration options
#
# enable: Enable MBMS transmission in the eNB
# m1u_multiaddr: Multicast address where the data plane is communicated
# m1u_if_addr: IP of the interface where the data plane is communicated
# mcs: Modulation and Coding scheme for MBMS traffic
#####################################################################
[embms]
#enable = false
#m1u_multiaddr = 239.255.0.1
#m1u_if_addr = 127.0.1.201
#mcs = 20

#####################################################################
# Channel emulator options
#
# enable: Enable/Disable internal Downlink/Uplink channel emulator
#####################################################################
[channel.dl]
#enable = false

[channel.ul]
#enable = false

#####################################################################
# Expert configuration options
#
# pusch_max_its:        Maximum number of turbo decoder iterations (default 4)
# pusch_8bit_decoder:   Use 8-bit for LLR representation and turbo decoder trellis computation (experimental)
# nof_phy_threads:      Selects the number of PHY threads (maximum 4, minimum 1, default 3)
# metrics_period_secs:  Sets the period at which metrics are requested from the eNB
# metrics_csv_enable:   Write eNB metrics to CSV file.
# metrics_csv_filename: File path to use for CSV metrics
# report_json_enable:   Write eNB report to JSON file (default disabled)
# report_json_filename: Report JSON filename (default /tmp/enb_report.json)
# report_json_asn1_oct: Prints ASN1 messages encoded as an octet string instead of plain text in the JSON report file
# alarms_log_enable:    Enable Alarms logging (default disabled)
# alarms_filename:      Alarms logging filename (default /tmp/alarms.log)
# tracing_enable:       Write source code tracing information to a file
# tracing_filename:     File path to use for tracing information
# tracing_buffcapacity: Maximum capacity in bytes the tracing framework can store
# stdout_ts_enable:     Prints once per second the timestamp into stdout
# tx_amplitude:         Transmit amplitude factor (set 0-1 to reduce PAPR)
# rrc_inactivity_timer  Inactivity timeout used to remove UE context from RRC (in milliseconds)
# max_mac_dl_kos:       Maximum number of consecutive KOs in DL before triggering the UE's release (default 100)
# max_mac_ul_kos:       Maximum number of consecutive KOs in UL before triggering the UE's release (default 100)
# max_prach_offset_us:  Maximum allowed RACH offset (in us)
# nof_prealloc_ues:     Number of UE memory resources to preallocate during eNB initialization for faster UE creation (default 8)
# rlf_release_timer_ms: Time taken by eNB to release UE context after it detects an RLF
# eea_pref_list:        Ordered preference list for the selection of encryption algorithm (EEA) (default: EEA0, EEA2, EEA1)
# eia_pref_list:        Ordered preference list for the selection of integrity algorithm (EIA) (default: EIA2, EIA1, EIA0)
# gtpu_tunnel_timeout:  Time that GTPU takes to release indirect forwarding tunnel since the last received GTPU PDU (0 for no timer)
# ts1_reloc_prep_timeout: S1AP TS 36.413 TS1RelocPrep Expiry Timeout value in milliseconds
# ts1_reloc_overall_timeout: S1AP TS 36.413 TS1RelocOverall Expiry Timeout value in milliseconds
# s1_setup_max_retries: Maximum amount of retries to setup the S1AP connection. If this value is exceeded, an alarm is written to the log. -1 means infinity.
#####################################################################
[expert]
#pusch_max_its        = 8
#pusch_8bit_decoder   = false
#nof_phy_threads      = 3
#metrics_period_secs  = 1
#metrics_csv_enable   = false
#metrics_csv_filename = /tmp/enb_metrics.csv
#report_json_enable   = true
#report_json_filename = /tmp/enb_report.json
#report_json_asn1_oct = false
#alarms_log_enable    = true
#alarms_filename      = /tmp/enb_alarms.log
#tracing_enable       = true
#tracing_filename     = /tmp/enb_tracing.log
#tracing_buffcapacity = 1000000
#stdout_ts_enable     = false
tx_amplitude         = 0.5  # Reduced for lab use
#rrc_inactivity_timer = 30000
#max_mac_dl_kos       = 100
#max_mac_ul_kos       = 100
#max_prach_offset_us  = 30
#nof_prealloc_ues     = 8
#rlf_release_timer_ms = 4000
#eea_pref_list        = EEA0, EEA2, EEA1
#eia_pref_list        = EIA2, EIA1, EIA0
#gtpu_tunnel_timeout  = 0
#ts1_reloc_prep_timeout = 10000
#ts1_reloc_overall_timeout = 10000
#s1_setup_max_retries = -1
